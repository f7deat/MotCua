@model IEnumerable<MotCua.Model.Request>

@{
    ViewBag.Title = "Index";
    Layout = "~/Areas/Student/Views/Shared/_Layout.cshtml";
    var ListAttach = (IEnumerable<MotCua.Model.Attach>)ViewBag.ListAttach;
}

<div class="row 2col">
    <div class="col-md-3 col-sm-6 spacing-bottom-sm spacing-bottom">
        <div class="tiles blue added-margin">
            <div class="tiles-body">
                <div class="controller">
                    <a href="javascript:;" class="reload"></a>
                    <a href="javascript:;" class="remove"></a>
                </div>
                <div class="tiles-title"> Tổng số yêu cầu </div>
                <div class="heading"> <span class="animate-number" data-value="@ViewBag.TotalRequest" data-animation-duration="1200">@ViewBag.TotalRequest</span> </div>
                <div class="progress transparent progress-small no-radius">
                    <div class="progress-bar progress-bar-white animate-progress-bar" data-percentage="100%"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 spacing-bottom-sm spacing-bottom">
        <div class="tiles green added-margin">
            <div class="tiles-body">
                <div class="controller">
                    <a href="javascript:;" class="reload"></a>
                    <a href="javascript:;" class="remove"></a>
                </div>
                <div class="tiles-title"> Số yêu cầu đã xử lý </div>
                <div class="heading"> <span class="animate-number" data-value="0" data-animation-duration="1000">0</span> </div>
                <div class="progress transparent progress-small no-radius">
                    <div class="progress-bar progress-bar-white animate-progress-bar" data-percentage="0%"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6 spacing-bottom">
        <div class="tiles red added-margin">
            <div class="tiles-body">
                <div class="controller">
                    <a href="javascript:;" class="reload"></a>
                    <a href="javascript:;" class="remove"></a>
                </div>
                <div class="tiles-title"> Số yêu cầu đang xử lý </div>
                <div class="heading"> <span class="animate-number" data-value="0" data-animation-duration="1200">0</span> </div>
                <div class="progress transparent progress-white progress-small no-radius">
                    <div class="progress-bar progress-bar-white animate-progress-bar" data-percentage="0%"></div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-3 col-sm-6">
        <div class="tiles purple added-margin">
            <div class="tiles-body">
                <div class="controller">
                    <a href="javascript:;" class="reload"></a>
                    <a href="javascript:;" class="remove"></a>
                </div>
                <div class="tiles-title"> Số yêu cầu quá hạn </div>
                <div class="row-fluid">
                    <div class="heading"> <span class="animate-number" data-value="0" data-animation-duration="700">0</span> </div>
                    <div class="progress transparent progress-white progress-small no-radius">
                        <div class="progress-bar progress-bar-white animate-progress-bar" data-percentage="0%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-12">
        <div class="grid simple ">
            <div class="grid-title no-border">
                <h4>Yêu cầu của bạn</h4>
                <div class="tools">
                    <a href="javascript:;" class="collapse"></a>
                    <a href="#grid-config" data-toggle="modal" class="config"></a>
                    <a href="javascript:;" class="reload"></a>
                    <a href="javascript:;" class="remove"></a>
                </div>
            </div>
            <div class="grid-body no-border">
                <table class="table table-bordered no-more-tables">
                    <thead>
                        <tr>
                            <th>Nôi dung</th>
                            <th>Ngày gửi</th>
                            <th>Trạng thái</th>
                            <th>Tệp tin đính kèm</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var item in Model)
                        {
                        <tr>
                            <td>@Html.Raw(item.Content)</td>
                            <td>@item.RequestDate</td>
                            <td>
                                @if (item.Status == 0)
                                {
                                    <span class="label label-danger">Đang gửi</span>
                                }
                            </td>
                            <td>
                                <div class="btn-group">
                                    <button class="btn btn-small btn-success btn-demo-space"><i class="fa fa-cloud-download"></i></button>
                                    <button class="btn btn-small btn-success dropdown-toggle btn-demo-space" data-toggle="dropdown"> <span class="caret"></span> </button>
                                    <ul class="dropdown-menu">
                                        @foreach (var attach in ListAttach)
                                        {

                                            <li><a href="~/Content/files/@attach.Path">@attach.Path</a></li>
                                        }
                                    </ul>
                                </div>
                            </td>
                        </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

@section scripts {
    <script>
        Messenger().post({
	 message: @TempData["RequestStatus"],
	 type: 'error',
         showCloseButton: true
	          });
    </script>
}